<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/public.css">
    <link rel="stylesheet" href="./css/index.css">
    <title>Document</title>
</head>

<body>
    <div class="app">
        <div class="container">
            <div class="cart">
                <div class="header">
                    <div class="left">
                        <h2>购物车</h2>
                    </div>
                    <div class="right">
                        <span class="explain">
                            已选商品（不含运费）
                        </span>
                        <span style="font-size: 12px;color: #FF5000;">￥</span>
                        <span class="price">
                            0.00
                        </span>
                        <span class="submit">
                            结算
                        </span>
                    </div>
                </div>
                <div class="cart-list">
                    <ul class="title">
                        <li class="item" style="margin-left: 15px;">
                            <div class="all">
                                <input id="allselect" type="checkbox" value="全选">
                                <label for="allselect">全选</label>
                            </div>
                        </li>
                        <li class="item">商品信息</li>
                        <li></li>
                        <li></li>
                        <li class="item" style="margin-right: 36px;">单价</li>
                        <li class="item">数量</li>
                        <li class="item">操作</li>
                    </ul>
                    <ul class="goods">
                        <li class="good-item">
                            <div class="all">
                                <input id="allselect" type="checkbox" value="眼镜">
                            </div>
                            <div class="img">
                                <img src="https://img.alicdn.com/bao/uploaded/i3/2904347719/O1CN01s9fRP326tLwbfiRdT_!!2904347719.png_80x80.jpg"
                                    alt="">
                            </div>
                            <div class="title">
                                暴龙新款光学镜框时尚大脸男女金属眼镜架BJ7052王俊凯同款BJ7192
                            </div>
                            <div class="rice">
                                <span class="money">438.00</span>
                            </div>
                            <div class="count">
                                <p class="reduce">-</p>
                                <input type="number" name="" id="" value="1">
                                <p class="add">+</p>
                            </div>
                            <div class="desc">
                                删除
                            </div>
                        </li>
                        <li class="good-item">
                            <div class="all">
                                <input id="allselect" type="checkbox" value="手表">
                            </div>
                            <div class="img">
                                <img src="https://img.alicdn.com/bao/uploaded/i1/1917047079/O1CN01yqdFtA22AESMw7sLr_!!2-item_pic.png_80x80.jpg"
                                    alt="">
                            </div>
                            <div class="title">
                                Apple/苹果 Apple Watch SE；金色铝金属表壳；星光色运动型表带
                            </div>
                            <div class="rice">
                                <span class="money">2499.00</span>
                            </div>
                            <div class="count">
                                <p class="reduce">-</p>
                                <input type="number" name="" id="" value="1">
                                <p class="add">+</p>
                            </div>
                            <div class="desc">
                                删除
                            </div>
                        </li>
                        <li class="good-item">
                            <div class="all">
                                <input id="allselect" type="checkbox" value="手机">
                            </div>
                            <div class="img">
                                <img src="https://img.alicdn.com/bao/uploaded/i4/1917047079/O1CN01UOAs3S22AEUVxCTbE_!!1917047079.png_80x80.jpg"
                                    alt="">
                            </div>
                            <div class="title">
                                Apple/苹果 iPhone 13
                            </div>
                            <div class="rice">
                                <span class="money">5999.00</span>
                            </div>
                            <div class="count">
                                <p class="reduce">-</p>
                                <input type="number" name="" id="" value="1">
                                <p class="add">+</p>
                            </div>
                            <div class="desc">
                                删除
                            </div>
                        </li>
                        <li class="good-item">
                            <div class="all">
                                <input id="allselect" type="checkbox" value="相机">
                            </div>
                            <div class="img">
                                <img src="	https://img.alicdn.com/bao/uploaded/i2/2874484355/O1CN01TEfrFE1i2dbqw2OPm_!!2874484355.jpg_80x80.jpg"
                                    alt="">
                            </div>
                            <div class="title">
                                Leica/徕卡 D-LUX7多功能便携数码相机 卡片相机 微单相机 4K录制
                            </div>
                            <div class="rice">
                                <span class="money">10800.00</span>
                            </div>
                            <div class="count">
                                <p class="reduce">-</p>
                                <input type="number" name="" id="" value="1">
                                <p class="add">+</p>
                            </div>
                            <div class="desc">
                                删除
                            </div>
                        </li>
                        <li class="good-item">
                            <div class="all">
                                <input id="allselect" type="checkbox" value="相机">
                            </div>
                            <div class="img">
                                <img src="	https://img.alicdn.com/bao/uploaded/i2/640332672/O1CN01BsxuOj1Vbp2TFVrE4_!!640332672.jpg_80x80.jpg"
                                    alt="">
                            </div>
                            <div class="title">
                                ADAMF国潮重磅260克纯棉短袖T恤男女生宽松体恤潮流INS情侣半袖
                            </div>
                            <div class="rice">
                                <span class="money">59.00</span>
                            </div>
                            <div class="count">
                                <p class="reduce">-</p>
                                <input type="number" name="" id="" value="1">
                                <p class="add">+</p>
                            </div>
                            <div class="desc">
                                删除
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script>
        var selectAll = document.querySelector('#allselect')
        var selectItems = document.querySelectorAll('.goods .all input')
        var add = document.querySelectorAll('.add')
        var reduce = document.querySelectorAll('.reduce')
        var count = document.querySelectorAll('.count')
        var zero = document.querySelectorAll('.count input')
        var price = document.querySelector('.price')
        var goods = document.querySelectorAll('.goods li')
        var del = document.querySelectorAll('.desc')
        var submit = document.querySelector('.submit')

        //封装函数
        function totalAll() {
            var selectItems = document.querySelectorAll('.goods .all input')
            var p = 0
            selectItems.forEach((val) => {
                if (val.checked) {
                    p += val.parentNode.parentNode.children[3].firstElementChild.innerHTML * val.parentNode.parentNode.children[4].children[1].value
                }
            })
            price.innerHTML = p.toFixed(2)
        }
        //复选框
        for (let i = 0; i < selectItems.length; i++) {
            selectItems[i].onchange = () => {
                var boo = true
                for (let i = 0; i < selectItems.length; i++) {
                    if (!selectItems[i].checked) {
                        boo = false
                    }
                }
                selectAll.checked = boo
                totalAll()
            }
        }
        //加减
        count.forEach((val, index) => {
            var ad = parseInt(zero[index].value)
            val.onclick = (e) => {
                if (e.target.className == 'add') {
                    ad += 1
                    zero[index].value = ad
                    totalAll()
                }
                if (e.target.className == 'reduce') {
                    if (ad > 1) {
                        ad -= 1
                        zero[index].value = ad
                        totalAll()
                    } else {
                        ad = 1
                    }
                }
            }
        })
        //全选
        selectAll.onchange = () => {
            var type = selectAll.checked
            for (let i = 0; i < selectItems.length; i++) {
                selectItems[i].checked = type
            }
            totalAll()
        }
        //删除
        del.forEach((val) => {
            val.onclick = () => {
                var del = document.querySelectorAll('.desc')
                val.parentNode.remove()
                totalAll()
                
            }
            console.log(del.length)
        })



    </script>
</body>

</html>